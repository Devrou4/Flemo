<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tasks</title>
    <link rel="icon" type="image/x-icon" href="./static/flemo_new.png">
    <style>
        .task-item {
            display: flex;
            align-items: center;
            padding-right: 20px;
            position: relative;
        }
        .remove-task-icon {
            display: none; /* Hide by default */
            background: none;
            border: none;
            padding: 0;
            color: red;
            cursor: pointer;
            margin-left: auto; /* Align the "X" to the right */
        }
        .task-item:hover .remove-task-icon {
            display: inline; /* Show on hover */
        }
    </style>
</head>
<body data-bs-theme="dark" class="bg-dark-subtle">

<header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom p-3">
    <div class="col-md-3 mb-2 mb-md-0">
        <a href="/home" class="d-inline-flex link-body-emphasis text-decoration-none">
            <svg width="40" height="32" role="img" aria-label="Flemo" viewBox="0 0 256 256"><image width="100%" height="100%" href="./static/flemo_new.png"/></svg>
            <span class="fs-5">Flemo</span>
        </a>
    </div>

    <ul class="nav nav-underline col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a href="/home" class="nav-link px-2">Home</a></li>
        <li><a href="/notes" class="nav-link px-2">Notes</a></li>
        <li><a href="/tasks" class="nav-link px-2 active">Tasks</a></li>
        <li><a href="#" class="nav-link disabled px-2">Gallery</a></li>
        <li><a href="/blog" class="nav-link px-2">Blog</a></li>
        <li><a href="/about" class="nav-link px-2">About</a></li>
    </ul>

    <div class="col-md-3 text-end">
        <a href="/login"><button type="button" class="btn btn-outline-primary me-2">Login</button></a>
        <a href="/register"><button type="button" class="btn btn-primary">Sign-up</button></a>
    </div>
</header>

<div class="container">
    <form method="POST" action="/update-tasks"> <!-- Unified form -->
        {% for task in task_list %}
        <div class="form-check task-item">
            <input type="hidden" name="task_ids" value="{{ task.id }}"> <!-- Send each task id -->
            <input class="form-check-input me-2" type="checkbox" id="task_{{ task.id }}" name="task_done_{{ task.id }}" {% if task.done %}checked{% endif %} onchange="this.form.submit()">
            <label class="form-check-label" for="task_{{ task.id }}">
                {{ task.tittle }}
            </label>
            <button type="submit" name="remove_task" value="{{ task.id }}" class="remove-task-icon" aria-label="Remove task">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                </svg>
            </button>
        </div>
        {% endfor %}
    </form>
</div>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
